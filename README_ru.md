### Yggrasil network peers checker / upadater

Утилита предназначена для проверки доступности пиров и автоматического их обновления в конфигурационном файле Yggdrasil, а так же, с помощью метода admin API - addPeer.

Настроив автоматический запуск утилиты по расписанию, можно забыть о том, что публичные пиры иногда перестают работать и нужно их обновлять вручную.

**Внимание!** При запуске утилиты без указания каких-либо параметров командной строки будет использован путь к конфигурационному файлу по-умолчанию и, при наличии файла по этому пути и наличии разрешения на его изменение, пиры в нём будут обновлены.

**Внимание!** При обновлении пиров в конфигурационном файле, из него будут удалены все комментарии. Если вы не хотите терять комментарии, используйте эту утилиту только с параметром `-p`, либо сделайте резервную копию файла с комментариями перед использованием.

Используйте параметр `-h`, чтобы ознакомиться с описанием возможных параметров.

Чтобы просто вывести список пиров, отсортированный по времени отклика используйте параметр `-p`. При этом, все остальные параметры будут проигнорированы, никаких изменений в конфигурацию Yggrasil внесено не будет. 

Для того, чтобы утилита могла полноценно и корректно работать, внося измения в настройки Yggdrasil, у пользователя, с правами которого она запускается, должны быть соответствующие разрешения на изменение конфигурационного файла и/или использование Admin API.

Флаги `-r` (перезапустить Yggdrasil) и `-a` (использовать admin API) не имеет смысла использовать одновременно.

#### Примеры использования

Вывод отсортированного списка пиров:

```
peers_updater - p
```

Обновление пиров в конфигурационном файле по указанному пути (будет занесено два пира):

```
sudo ./peers_updater -c /home/user/tst/yggdrasil.conf -n 2
```

Обновление пиров (будут добавлены 2 пира) в конфигурационном файле с путём к нему по-умолчанию, а так же, добавление пиров с использованием admin-API:

```
sudo ./peers_updater -n 2 -a
```

Обновление пиров (будут добавлены 2 пира) в конфигурационном файле с путём к нему по-умолчанию, а так же, добавление дополнительных пиров (в строке разделенной пробелами). Всего будет добавлено 4 пира:

```
sudo ./peers_updater -n 2 -a -e "tcp://my.favorite.peer.ru:7777 tls://i.love.ru:7777"
```

По расписанию утилиту можно запускать с помощью cron (Linux) или с помощью другого планировщика (Windows). 

#### Сборка из исходников

Проект собирается без ошибок и предупреждений с cargo 1.65.0 и rustc 1.65.0.

```
git clone https://github.com/ygguser/peers_updater
cd peers_updater
cargo buid --release
```
